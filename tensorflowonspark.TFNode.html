

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>tensorflowonspark.TFNode module &mdash; TensorFlowOnSpark 2.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="tensorflowonspark.TFSparkNode module" href="tensorflowonspark.TFSparkNode.html" />
    <link rel="prev" title="tensorflowonspark.TFManager module" href="tensorflowonspark.TFManager.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> TensorFlowOnSpark
          

          
          </a>

          
            
            
              <div class="version">
                2.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="tensorflowonspark.html">tensorflowonspark package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="tensorflowonspark.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="tensorflowonspark.TFCluster.html">tensorflowonspark.TFCluster module</a></li>
<li class="toctree-l3"><a class="reference internal" href="tensorflowonspark.TFManager.html">tensorflowonspark.TFManager module</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">tensorflowonspark.TFNode module</a></li>
<li class="toctree-l3"><a class="reference internal" href="tensorflowonspark.TFSparkNode.html">tensorflowonspark.TFSparkNode module</a></li>
<li class="toctree-l3"><a class="reference internal" href="tensorflowonspark.dfutil.html">tensorflowonspark.dfutil module</a></li>
<li class="toctree-l3"><a class="reference internal" href="tensorflowonspark.gpu_info.html">tensorflowonspark.gpu_info module</a></li>
<li class="toctree-l3"><a class="reference internal" href="tensorflowonspark.marker.html">tensorflowonspark.marker module</a></li>
<li class="toctree-l3"><a class="reference internal" href="tensorflowonspark.pipeline.html">tensorflowonspark.pipeline module</a></li>
<li class="toctree-l3"><a class="reference internal" href="tensorflowonspark.reservation.html">tensorflowonspark.reservation module</a></li>
<li class="toctree-l3"><a class="reference internal" href="tensorflowonspark.reservation_client.html">tensorflowonspark.reservation_client module</a></li>
<li class="toctree-l3"><a class="reference internal" href="tensorflowonspark.util.html">tensorflowonspark.util module</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">TensorFlowOnSpark</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="tensorflowonspark.html">tensorflowonspark package</a> &raquo;</li>
        
      <li>tensorflowonspark.TFNode module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/tensorflowonspark.TFNode.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-tensorflowonspark.TFNode">
<span id="tensorflowonspark-tfnode-module"></span><h1>tensorflowonspark.TFNode module<a class="headerlink" href="#module-tensorflowonspark.TFNode" title="Permalink to this headline">¶</a></h1>
<p>This module provides helper functions for the TensorFlow application.</p>
<p>Primarily, these functions help with:</p>
<ul class="simple">
<li><p>starting the TensorFlow <code class="docutils literal notranslate"><span class="pre">tf.train.Server</span></code> for the node (allocating GPUs as desired, and determining the node’s role in the cluster).</p></li>
<li><p>managing input/output data for <em>InputMode.SPARK</em>.</p></li>
</ul>
<dl class="class">
<dt id="tensorflowonspark.TFNode.DataFeed">
<em class="property">class </em><code class="sig-name descname">DataFeed</code><span class="sig-paren">(</span><em class="sig-param">mgr</em>, <em class="sig-param">train_mode=True</em>, <em class="sig-param">qname_in='input'</em>, <em class="sig-param">qname_out='output'</em>, <em class="sig-param">input_mapping=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tensorflowonspark/TFNode.html#DataFeed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tensorflowonspark.TFNode.DataFeed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class manages the <em>InputMode.SPARK</em> data feeding process from the perspective of the TensorFlow application.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="field-list simple">
<dt class="field-odd">mgr</dt>
<dd class="field-odd"><p>TFManager instance associated with this Python worker process.</p>
</dd>
<dt class="field-even">train_mode</dt>
<dd class="field-even"><p>boolean indicating if the data feed is expecting an output response (e.g. inferencing).</p>
</dd>
<dt class="field-odd">qname_in</dt>
<dd class="field-odd"><p><em>INTERNAL_USE</em></p>
</dd>
<dt class="field-even">qname_out</dt>
<dd class="field-even"><p><em>INTERNAL_USE</em></p>
</dd>
<dt class="field-odd">input_mapping</dt>
<dd class="field-odd"><p><em>For Spark ML Pipelines only</em>.  Dictionary of input DataFrame columns to input TensorFlow tensors.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="method">
<dt id="tensorflowonspark.TFNode.DataFeed.batch_results">
<code class="sig-name descname">batch_results</code><span class="sig-paren">(</span><em class="sig-param">results</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tensorflowonspark/TFNode.html#DataFeed.batch_results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tensorflowonspark.TFNode.DataFeed.batch_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Push a batch of output results to the Spark output RDD of <code class="docutils literal notranslate"><span class="pre">TFCluster.inference()</span></code>.</p>
<p>Note: this currently expects a one-to-one mapping of input to output data, so the length of the <code class="docutils literal notranslate"><span class="pre">results</span></code> array should match the length of
the previously retrieved batch of input data.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="field-list simple">
<dt class="field-odd">results</dt>
<dd class="field-odd"><p>array of output data for the equivalent batch of input data.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="tensorflowonspark.TFNode.DataFeed.next_batch">
<code class="sig-name descname">next_batch</code><span class="sig-paren">(</span><em class="sig-param">batch_size</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tensorflowonspark/TFNode.html#DataFeed.next_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tensorflowonspark.TFNode.DataFeed.next_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a batch of items from the input RDD.</p>
<p>If multiple tensors are provided per row in the input RDD, e.g. tuple of (tensor1, tensor2, …, tensorN) and:</p>
<ul class="simple">
<li><p>no <code class="docutils literal notranslate"><span class="pre">input_mapping</span></code> was provided to the DataFeed constructor, this will return an array of <code class="docutils literal notranslate"><span class="pre">batch_size</span></code> tuples,
and the caller is responsible for separating the tensors.</p></li>
<li><p>an <code class="docutils literal notranslate"><span class="pre">input_mapping</span></code> was provided to the DataFeed constructor, this will return a dictionary of N tensors,
with tensor names as keys and arrays of length <code class="docutils literal notranslate"><span class="pre">batch_size</span></code> as values.</p></li>
</ul>
<p>Note: if the end of the data is reached, this may return with fewer than <code class="docutils literal notranslate"><span class="pre">batch_size</span></code> items.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="field-list simple">
<dt class="field-odd">batch_size</dt>
<dd class="field-odd"><p>number of items to retrieve.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>A batch of items or a dictionary of tensors.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="tensorflowonspark.TFNode.DataFeed.should_stop">
<code class="sig-name descname">should_stop</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tensorflowonspark/TFNode.html#DataFeed.should_stop"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tensorflowonspark.TFNode.DataFeed.should_stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the feed process was told to stop (by a call to <code class="docutils literal notranslate"><span class="pre">terminate</span></code>).</p>
</dd></dl>

<dl class="method">
<dt id="tensorflowonspark.TFNode.DataFeed.terminate">
<code class="sig-name descname">terminate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/tensorflowonspark/TFNode.html#DataFeed.terminate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tensorflowonspark.TFNode.DataFeed.terminate" title="Permalink to this definition">¶</a></dt>
<dd><p>Terminate data feeding early.</p>
<p>Since TensorFlow applications can often terminate on conditions unrelated to the training data (e.g. steps, accuracy, etc),
this method signals the data feeding process to ignore any further incoming data.  Note that Spark itself does not have a mechanism
to terminate an RDD operation early, so the extra partitions will still be sent to the executors (but will be ignored).  Because
of this, you should size your input data accordingly to avoid excessive overhead.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="tensorflowonspark.TFNode.batch_results">
<code class="sig-name descname">batch_results</code><span class="sig-paren">(</span><em class="sig-param">mgr</em>, <em class="sig-param">results</em>, <em class="sig-param">qname='output'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tensorflowonspark/TFNode.html#batch_results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tensorflowonspark.TFNode.batch_results" title="Permalink to this definition">¶</a></dt>
<dd><p><em>DEPRECATED</em>. Use TFNode.DataFeed class instead.</p>
</dd></dl>

<dl class="function">
<dt id="tensorflowonspark.TFNode.export_saved_model">
<code class="sig-name descname">export_saved_model</code><span class="sig-paren">(</span><em class="sig-param">sess</em>, <em class="sig-param">export_dir</em>, <em class="sig-param">tag_set</em>, <em class="sig-param">signatures</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tensorflowonspark/TFNode.html#export_saved_model"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tensorflowonspark.TFNode.export_saved_model" title="Permalink to this definition">¶</a></dt>
<dd><p><em>DEPRECATED</em>. Use TF provided APIs instead.</p>
</dd></dl>

<dl class="function">
<dt id="tensorflowonspark.TFNode.hdfs_path">
<code class="sig-name descname">hdfs_path</code><span class="sig-paren">(</span><em class="sig-param">ctx</em>, <em class="sig-param">path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tensorflowonspark/TFNode.html#hdfs_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tensorflowonspark.TFNode.hdfs_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function to create a Tensorflow-compatible absolute HDFS path from relative paths</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="field-list simple">
<dt class="field-odd">ctx</dt>
<dd class="field-odd"><p>TFNodeContext containing the metadata specific to this node in the cluster.</p>
</dd>
<dt class="field-even">path</dt>
<dd class="field-even"><p>path to convert</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>An absolute path prefixed with the correct filesystem scheme.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="tensorflowonspark.TFNode.next_batch">
<code class="sig-name descname">next_batch</code><span class="sig-paren">(</span><em class="sig-param">mgr</em>, <em class="sig-param">batch_size</em>, <em class="sig-param">qname='input'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tensorflowonspark/TFNode.html#next_batch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tensorflowonspark.TFNode.next_batch" title="Permalink to this definition">¶</a></dt>
<dd><p><em>DEPRECATED</em>. Use TFNode.DataFeed class instead.</p>
</dd></dl>

<dl class="function">
<dt id="tensorflowonspark.TFNode.start_cluster_server">
<code class="sig-name descname">start_cluster_server</code><span class="sig-paren">(</span><em class="sig-param">ctx</em>, <em class="sig-param">num_gpus=1</em>, <em class="sig-param">rdma=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tensorflowonspark/TFNode.html#start_cluster_server"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tensorflowonspark.TFNode.start_cluster_server" title="Permalink to this definition">¶</a></dt>
<dd><p><em>DEPRECATED</em>.  Use higher-level APIs like <cite>tf.keras</cite> or <cite>tf.estimator</cite></p>
</dd></dl>

<dl class="function">
<dt id="tensorflowonspark.TFNode.terminate">
<code class="sig-name descname">terminate</code><span class="sig-paren">(</span><em class="sig-param">mgr</em>, <em class="sig-param">qname='input'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tensorflowonspark/TFNode.html#terminate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tensorflowonspark.TFNode.terminate" title="Permalink to this definition">¶</a></dt>
<dd><p><em>DEPRECATED</em>. Use TFNode.DataFeed class instead.</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tensorflowonspark.TFSparkNode.html" class="btn btn-neutral float-right" title="tensorflowonspark.TFSparkNode module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tensorflowonspark.TFManager.html" class="btn btn-neutral float-left" title="tensorflowonspark.TFManager module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Yahoo Inc

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>